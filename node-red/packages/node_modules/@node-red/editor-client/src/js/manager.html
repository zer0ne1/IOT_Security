<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css"> <!-- Import CSS -->
    <title>Manager User</title>
    <script src="https://unpkg.com/d3/dist/d3.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"
        integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div class="header">
        <a href="/">
            <img src="/red/images/node-red.svg" alt="Logo" class="logo"> <!-- Logo with a link to home -->
        </a>
        <h2>Users Management</h2>
    </div>
    <div class="search-add">
        <div>
            <input type="text" id="searchInput" placeholder="Search by username..." onkeyup="filterTable()">
            <select id="roleFilter" onchange="filterTable()">
            </select>
        </div>
        <button class="btn-add" onclick="openModal()">Add User</button>
    </div>
    <div class="div-table">
        <table>
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Username</th>
                    <th>Role</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dòng dữ liệu sẽ được thêm bằng JavaScript -->
            </tbody>
        </table>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3>Add User</h3>
            <form id="loginForm-addUser">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required>
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" placeholder="******" required>
                <label for="repassword">Confirm password:</label>
                <input type="password" id="repassword" name="repassword" placeholder="******" required>
                <label for="permission_id">Role:</label>
                <select id="roleSelect" name="permission_id">
                </select>
                <div class="btns-footer-modal">
                    <button type="submit" class="btn-ok">Submit</button>
                    <button class="btn-reset">Reset</button>
                </div>

            </form>
        </div>
    </div>
    <!-- Modal sửa tài khoản -->
    <div id="myModalEdit" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModalEdit()">&times;</span>
            <h3>Edit User</h3>
            <form id="loginForm-updateUser">
                <label for="id">Id:</label>
                <input type="text" id="id-edit" name="id-edit" readonly>
                <label for="username-edit">Username:</label>
                <input type="text" id="username-edit" name="username-edit">
                <label for="password-edit">Password:</label>
                <input type="password" id="password-edit" name="password-edit" placeholder="******">
                <label for="permission_id-edit">Role:</label>
                <select id="roleSelectEdit" name="permission_id-edit">
                </select>
                <div class="btns-footer-modal">
                    <button type="submit" class="btn-ok">Submit</button>
                    <button type="submit" class="btn-reset">Reset</button>
                </div>

            </form>
        </div>
    </div>
    <!-- Modal Xóa Tài khoản -->
    <div id="myModalDelete" class="modal">
        <!-- Nội dung modal -->
        <div class="modal-content modal-content-close">
            <span class="close" onclick="closeModalDelete()">&times;</span>
            <div class="content-close">
                <h2>Xác nhận xóa tài khoản</h2>
                <p>Bạn có chắc chắn muốn xóa tài khoản của mình không?</p>
            </div>

            <div class="button-container">
                <button onclick="deleteAccount()" class="btn-modal-delete">Xác nhận</button>

            </div>
        </div>
    </div>

    <!-- Modal flow -->
    <div id="myModalFlow" class="modal">
        <div class="modal-content modal-content-flow">
            <span class="closeModalFlow" onclick="closeModalFlow()">&times;</span>
            <h3>List Flows</h3>
            <div class="tab-container">
                <!-- Tab headers -->
                <div id="tabHeaders" class="tab-headers">
                    <!-- Tab headers will be generated by JavaScript -->
                </div>
                <!-- Tab content -->
                <div id="tabContents" class="tab-contents">
                    <!-- Tab contents will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    <div id="loadingSpinner" style="display: none;">
        <p>Loading...</p>
    </div>
    <script src="script.js"></script>

</body>

</html>