const Route = require("express").Router();
const controller = require("../controllers/users");
const { tryCatch } = require("../middlewares/errorHandle");
const { filterBodyRequest } = require("../middlewares/filterRequest");
const { requireLogin, requireRole } = require("../middlewares/auth");

Route.get("/", requireLogin, requireRole("A"), tryCatch(controller.get));
Route.get("/:id", requireLogin, requireRole("A"), tryCatch(controller.getById));
Route.post(
  "/", requireLogin, requireRole("A"),
  filterBodyRequest,
  tryCatch(controller.create)
);
Route.put(
  "/:id", requireLogin, requireRole("A"),
  filterBodyRequest,
  tryCatch(controller.update)
);
Route.delete(
  "/:id", requireLogin, requireRole("A"),
  tryCatch(controller.deleteById)
);

module.exports = Route;
